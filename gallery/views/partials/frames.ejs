<div class="fog-frame-x" id="list">
    <section class="frame">
        <div id="available-list-of-pieces">
            <h3>ALL AVAILABLE PIECES</h3>
            <% for (let key in piecePhoto) { 
                   if (piecePhoto.hasOwnProperty(key)) { 
                       const item = piecePhoto[key];
            %>
                   <div class="list-item-row" id="<%= item.id %>">
                       <div id="a-piece-name"><%= item.name %></div>
                       <div id="a-artist"><%= item.artist %></div>
                   </div>
            <% }}; %>
         </div>
    </section>
    </div>

<div class="fog-frame-x" id="cart-picking">
    <section class="frame">
        <div id="picked-pieces">
            <h3>My Cart</h3>
            <% cart.forEach (cartItem => { %>
                <div class="pick-item-row">
                    <div class="attach_cart_item"><input type="checkbox" id="<%= cartItem.id %>" amount="<%= cartItem.USDprice %>" class="attach-cart-item-checkbox" <%= cartItem.active ? 'checked' : '' %>></div>
                    <div class="cart_item_name"><%= cartItem.name %></div>
                    <div class="origin_cart_item_price"><%= cartItem.price %> <%= cartItem.currency %></div>
                    <div class="cart_item_price"><%= cartItem.USDprice %> USD</div>
                </div>
            <% }); %>
            <div class="pick-item-row total" id="picked-total" list="<%= purchaseItems %>" paused="<%= purchasePaused %>" unchecked="<%= unchecked %>" checked="<%= checked %>"><span id="amountSum" sum="<%= totalPurchase %>">Total: <%= totalPurchase %> USD</span></div>
            <div id="paypal-button-container"></div>
        </div>
        <script>
            const purchaseUnits = JSON.parse(`<%- purchaseItems %>`);

            paypal.Buttons({
                createOrder: function(data, actions) {
                    return actions.order.create({
                        purchase_units: [
                            purchaseUnits[0]
                        ]
                    });
                },
                onApprove: function(data, actions) {
                     return actions.order.capture().then(function(details) {
                        alert('Transaction [' + data.orderID + '] completed by ' + details.payer.name.given_name);
                        /* return request('/bought/save', {
                            method: 'POST',
                            headers: {
                                'content-type': 'application/json'
                            },
                            body: JSON.stringify([{
                                orderId: data.orderID,
                                pieceId: 'SelectedId',
                                userExternalId: currentUser.userExtId    
                            }])
                        });*/
                    });
                }
            }).render('#paypal-button-container');
        </script>
    </section>
</div>

<div class="fog-frame-x" id="logout-frame">
    <section class="frame">
        <div id="logout-frame">
            <h3>Logout</h3>
            <p>You are about to leave you session, logout?</p>
            <div id="buttons">
                <button id="logout-yes">Yes</button>
                <button id="logout-no">No</button>
            </div>
        </div>
    </section>
</div>